<html>
  <head>
    <title>Drawing Tools</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <!-- playground-hide -->
    <script>
      const process = { env: {} };
      process.env.GOOGLE_MAPS_API_KEY =
        "AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg";
    </script>
    <!-- playground-hide-end -->

  </head>
  <body>
    <div id="map"></div>

    <!-- 
     The `defer` attribute causes the callback to execute after the full HTML
     document has been parsed. For non-blocking uses, avoiding race conditions,
     and consistent behavior across browsers, consider loading using Promises
     with https://www.npmjs.com/package/@googlemaps/js-api-loader.
    -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB41DRUbKWJHPxaFjMAwdrzWzbVKartNGg&callback=initMap&libraries=drawing&v=weekly"
      defer
    ></script>
    <script>
        function initMap() {
            const map = new google.maps.Map(
            document.getElementById("map"),
            {
                center: { lat: 50.40444089177163, lng: 30.62135376141017},
                zoom: 8,
            }
            );
        
            const drawingManager = new google.maps.drawing.DrawingManager({
            drawingMode: google.maps.drawing.OverlayType.MARKER,
            drawingControl: true,
            drawingControlOptions: {
                position: google.maps.ControlPosition.TOP_CENTER,
                drawingModes: [
                    google.maps.drawing.OverlayType.CIRCLE,
                ],
            },
            markerOptions: {
                icon: "https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",
            },
            circleOptions: {
                fillColor: "#4c6fdf",
                fillOpacity: 0.5,
                strokeWeight: 2,
                clickable: true,
                editable: true,
                zIndex: 0,
            },
            });
        
            drawingManager.setMap(map);

            function setSelection (shape) {
            var cont, lt, lg;
            
            // getting shape coordinates
            if(shape.type == 'circle') {
                cont = "Shape Type: <b>" + shape.type.toUpperCase() + "</b><br><small>Shape ID: " + shape.id + "<br>Radius: " + shape.getRadius() + "<br>Center Lat: " + shape.getCenter().lat() + "<br>Center Lng: " + shape.getCenter().lng() + "</small>";
                lt = shape.getCenter().lat();
                lg = shape.getCenter().lng();
            } else if (shape.type == 'rectangle') {
                var bounds = shape.getBounds();
                cont = "Shape Type: <b>" + shape.type.toUpperCase() + "</b><br><small>Shape ID: " + shape.id + "<br><b>Start:</b> " + bounds.getNorthEast() + "<br><b>End:</b> " + bounds.getSouthWest() + "<br>Center Lat: " + bounds.getCenter().lat() + "<br>Center Lng: " + bounds.getCenter().lng() + "</small>";
                lt = bounds.getCenter().lat();
                lg = bounds.getCenter().lng();
            }
            else {
                var v = shape.getPath();
                cont = "Shape Type: <b>" + shape.type.toUpperCase() + "</b><br><small>Shape ID: " + shape.id + "<br><b>Vertices: " + v.getLength() + "</b><br>Length: " + google.maps.geometry.spherical.computeLength(v).toFixed(2) + "km</small>"
                for (var i=0; i < v.getLength(); i++) {
                var xy = v.getAt(i);
                lt = xy.lat();
                lg = xy.lng();
                }
            }
            
            // infowindow.setContent("<p>" + cont + "</p><a hre='' title='Remove this " + shape.type + "' class='text-danger' onclick='deleteSelectedShape();return false;' id='del" + shape.id + "'><i class='fas fa-trash-alt'></i> Remove this shape</a>");
            // infowindow.setPosition({lat:lt, lng:lg});
            // infowindow.open(map);

            console.log(`lat: ${lt}, lng: ${lg}, radius: ${shape.getRadius()}`)
            const shape_0 = new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40444089177163 , lng: 30.62135376141017},radius: 1000});
            


            new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.41208223940063, lng: 30.62135376141017},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.41157462574818, lng: 30.625639143070657},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.41011924557528, lng: 30.629355013201298},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40790950447434, lng: 30.632007639660742},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40523902291214, lng: 30.633244717841727},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40246259065736, lng: 30.632902135502714},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.39994901356299, lng: 30.631025660141926},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.39803212842695, lng: 30.627864726168927},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.39696648960652, lng: 30.623839215544344},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.39689359687421, lng: 30.619483688159136},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.39782312888824, lng: 30.61537646662461},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.39963165972107, lng: 30.61206294687711},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.402079027795914, lng: 30.60998325294013},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.404840196576636, lng: 30.609413792381208},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.407548396310546, lng: 30.610430465278977},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40984383432146, lng: 30.612898451561865},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.41142150893272, lng: 30.616490000194794},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40954793110161, lng: 30.622797191762814},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40761867010334, lng: 30.627774122183364},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40405669694332, lng: 30.62945196844542},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.400692323004, lng: 30.626969595632733},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.39925361224245, lng: 30.621603277436165},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40047910431202, lng: 30.61610917557702},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.4037393877023, lng: 30.61330849454138},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.407360190661485, lng: 30.614640299000637},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.409085866660206, lng: 30.618600133682158},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40690991630186, lng: 30.623674594423846},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.403223224843515, lng: 30.6254387512008},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.401950562034756, lng: 30.621603277436165},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.40304404816477, lng: 30.617413143987797},radius: 150}).setMap(map)
new google.maps.Circle({strokeColor:'#0062cc',strokeOpacity:0.5,strokeWeight:1,fillColor:'#133c55',fillOpacity:0.5,center:{lat:50.4063936246369, lng: 30.618580034413927},radius: 150}).setMap(map)
            shape_0.setMap(map);
            
            shape.setEditable(true);
        }
        
        google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
		if (e.type !== google.maps.drawing.OverlayType.MARKER) {
			// Switch back to non-drawing mode after drawing a shape.
			drawingManager.setDrawingMode(null);
			// Add an event listener that selects the newly-drawn shape when the user mouses down on it.
			var newShape = e.overlay;
			newShape.type = e.type;
			newShape.id=new Date().getTime()+'_'+Math.floor(Math.random()*1000);
			
			google.maps.event.addListener(newShape, 'click', function (e) {
				if (e.vertex !== undefined) {
					if (newShape.type === google.maps.drawing.OverlayType.POLYGON) {
						var path = newShape.getPaths().getAt(e.path);
						path.removeAt(e.vertex);
						if (path.length < 3) {newShape.setMap(null);}
					}
					if (newShape.type === google.maps.drawing.OverlayType.POLYLINE) {
						var path = newShape.getPath();
						path.removeAt(e.vertex);
						if (path.length < 2) {newShape.setMap(null);}
					}
				}
				setSelection(newShape);
			});
			setSelection(newShape);
		} 
	});
    
        }
    </script>

    <style>
        #map {
            height: 100%;
        }
        
        /* 
        * Optional: Makes the sample page fill the window. 
        */
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        
    </style>
  </body>
</html>